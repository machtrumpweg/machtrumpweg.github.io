<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Mach Trump Weg</title>
  <style>
    /* Grundlayout */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      text-align: center;
      font-family: sans-serif;
    }
    header {
      padding: 20px;
    }
    .title-small {
      font-size: 1.2em;
      margin: 0;
    }
    .title-big {
      font-size: 3em;
      margin: 0;
    }
    /* Canvas-Container füllt den restlichen Platz */
    #canvas-container {
      position: relative;
      width: 100%;
      height: calc(100% - 150px); /* Platz für Header und Toolbar */
      overflow: hidden;
    }
    canvas {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
    }
    /* Toolbar am unteren Rand */
    #toolbar {
      padding: 10px;
      background-color: #f0f0f0;
      width: 100%;
    }
  </style>
</head>
<body>
  <!-- Kopfzeile -->
  <header>
    <h3 class="title-small">Die offizielle</h3>
    <h1 class="title-big">Mach Trump Weg</h1>
    <h3 class="title-small">Seite</h3>
  </header>

  <!-- Hauptbereich mit Canvas -->
  <div id="canvas-container">
    <canvas id="trumpCanvas"></canvas>
  </div>

  <!-- Toolbar mit Revert-Button -->
  <div id="toolbar">
    <button id="revertButton">Revert Trump</button>
  </div>

  <script>
    const canvas = document.getElementById('trumpCanvas');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    const image = new Image();
    image.crossOrigin = "Anonymous";
    // Ersetze diesen Link durch ein satirisches Trump-Bild
    image.src = "https://raw.githubusercontent.com/machtrumpweg/machtrumpweg.github.io/refs/heads/main/TrumpPortrait.jpg";

    // Canvas-Größe anpassen
    function resizeCanvas() {
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
      if (image.complete) {
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      }
    }
    window.addEventListener('resize', resizeCanvas);
    image.onload = resizeCanvas;

    // Mausposition relativ zum Canvas ermitteln
    function getMousePos(evt) {
      const rect = canvas.getBoundingClientRect();
      return {
        x: (evt.clientX - rect.left) * (canvas.width / rect.width),
        y: (evt.clientY - rect.top) * (canvas.height / rect.height)
      };
    }

    // Eraser-Funktion: Mit destination-out werden Bereiche "ausradiert"
    function erase(evt) {
      const pos = getMousePos(evt);
      ctx.globalCompositeOperation = 'destination-out';
      ctx.beginPath();
      ctx.arc(pos.x, pos.y, 20, 0, Math.PI * 2, false);
      ctx.fill();
      ctx.globalCompositeOperation = 'source-over';
    }

    // Ereignis-Listener für das Zeichnen
    canvas.addEventListener('mousedown', (evt) => {
      isDrawing = true;
      erase(evt);
      resetRestoreTimeout();
    });
    canvas.addEventListener('mousemove', (evt) => {
      if (isDrawing) {
        erase(evt);
        resetRestoreTimeout();
      }
    });
    canvas.addEventListener('mouseup', () => {
      isDrawing = false;
    });
    canvas.addEventListener('mouseleave', () => {
      isDrawing = false;
    });

    // Revert-Button: Bild neu laden
    document.getElementById('revertButton').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
    });

    // Automatische Wiederherstellung nach Inaktivität (10 Sekunden)
    let restoreTimeout;
    function resetRestoreTimeout() {
      clearTimeout(restoreTimeout);
      restoreTimeout = setTimeout(() => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      }, 10000);
    }
  </script>
</body>
</html>
